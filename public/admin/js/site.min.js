let $helpButton=$("#help-button");function initHelpTooltip(t,e){t=t||$helpButton.data("page"),e=e||"",ajaxRequest("index.php?page=ajax.help&tooltip=1&pg="+t+"&modal="+e,"","")}function loadHelpEditor(t="helpEditor"){"undefined"!=typeof tinyMCE&&tinyMCE.EditorManager.execCommand("mceAddEditor",!1,t)}function loadHelpTooltip(t,e){let n=$("<div/>").html(t),i=e?$("#myModal"):$("div.content");n.find('h4 a[href*="#"]:not([href="#"])').each(function(){var t=$(this).attr("href").substring(1),a=$(this).parent().next("p").text();if(t.length){let n=i.find('label[for="'+t+'"]');if(n.length){let t=n.eq(0).text();":"===t.substring(t.length-1)&&n.html(t.substring(0,t.length-1)+"&nbsp;&nbsp;");let e=$("<i/>");e.text("help_outline").attr("rel","tooltip").addClass("material-icons").addClass("label-tooltip").data("title",a).on("click",function(t){t.stopPropagation(),t.preventDefault()}),n.append(e)}}}),$('[rel="tooltip"]').tooltip({trigger:"hover"})}function unLoadHelpEditor(t="helpEditor"){"undefined"!=typeof tinyMCE&&tinyMCE.EditorManager.execCommand("mceRemoveEditor",!1,t)}$(document).ready(function(){!$helpButton.length||".edit"!==$helpButton.data("page").substring($helpButton.data("page").length-5)&&"home"!==$helpButton.data("page")||initHelpTooltip(),$("body").on("click","#help-button",function(t){t.preventDefault(),unLoadHelpEditor(),ajaxRequest("index.php?page=ajax.help&pg="+$(this).data("page"),"","")}),$("#boxHelp").on("click","#help-edit-button",function(t){t.preventDefault(),ajaxRequest("index.php?page=ajax.help&pg="+$helpButton.data("page")+"&edit=1","","")}),$("#boxHelp").on("click","#help-close-button",function(t){t.preventDefault(),$("#boxHelp").fadeOut("fast"),unLoadHelpEditor()}),$("#boxHelp").on("click","#help-save-button",function(t){var e=$("#helpData");t.preventDefault(),$("#helpEditor").val(tinyMCE.get("helpEditor").getContent()),ajaxRequest(e.attr("action"),[],"POST","#helpData"),unLoadHelpEditor()}),$("#boxHelp").on("click","#help-more-button",function(t){t.preventDefault(),$("#legend-details").fadeToggle("fast")}),$("#sidebarNav .nav-link, #minimizeSidebar").on("click",function(){return $(this).data("id")&&ajaxRequest("index.php?page=site.left&id="+$(this).data("id")),!0}),$("#toggleMenuDesktop").on("click",function(){return $("#minimizeSidebar").click(),!0}),$("body").on("click",".alert-holder .alert .close",function(){$(this).parent().fadeOut()}),$.fn.extend({limiter:function(a,t){function e(t,e){var n=t.value.length;a<n&&(t.value=t.value.substr(0,a),n=a),e.html(a-n)}$(this).on("keyup focus",function(){e(this,t)}),e($(this)[0],t)}}),addCharLimit(),setInterval(function(){ajaxRequest("index.php?page=ajax.session")},1e5),$("body").on("click",".toggle-view",function(t){t.preventDefault();var e=$(this).data("target"),n=$(this).data("toggle-self"),a=$(this).data("toggle-self-class"),i=$(this).data("toggle-self-type"),l=$(this).data("toggle-self-time"),o=$(this).data("toggle-target-type"),r=$(this).data("toggle-target-tab"),p=$(this).data("toggle-target-time"),t=$(this).data("toggle-scroll");if(e&&e.length&&$(e).length){if(r&&r.length&&$(r).length&&"none"!==$(r).css("display"))return!1;n&&(i&&"slide"===i?$(this).slideToggle(l):$(this).fadeToggle(l)),a&&$(this).toggleClass(a),o&&"slide"===o?$(e).slideToggle(void 0!==p?p:null):$(e).fadeToggle(void 0!==p?p:null),t&&scrollToTarget(t)}return!1}),filtersMobile()});var replaceMap={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};function formatSelect2(t){if(t.ajax&&t.el&&(t.element=t.el),t.element){var e=t.ajax?t.element:$(t.element),n=t.ajax?e:$(t.element).parent(),a=n.data("fields").split(":::"),i=t.ajax?t:e.data(),l="",o=$.fn.select2.amd.require("select2/utils");const r=/&nbsp;/gi;return $.each(a,function(t,e){i[e]&&(l+=(n.data(e)?"<strong>"+n.data(e)+":</strong> ":"")+"&nbsp;".repeat(i[e].toString().split("&nbsp;").length-1)+o.escapeMarkup(i[e].toString().replace(r," "))+(n.data(e+"-no-br")?"&nbsp;".repeat(3):"<br />"))}),$("<span>"+l+"</span>")}return t.text}function formatSelect2Products(t){var e=$(t.element);return e.data("is-cat")?$('<strong style="font-size: 15px; '+(e.is(":disabled")?"color: #6D6C6C;":"")+'">'+t.text+"</strong>"):t.text}function formatSelect2Selection(t){if(t.element){var e=$(t.element),n=$(t.element).parent().data("fields-selection").split(":::"),a=e.data(),i="";const l=/&nbsp;/gi;return t.ajax&&(a=t),$.each(n,function(t,e){a[e]&&(i.length&&(i+=" / "),i+="&nbsp;".repeat(a[e].toString().split("&nbsp;").length-1)+a[e].toString().replace(l," "))}),$("<span>"+i+"</span>")}return t.text}function processResultsSelect2(t,e){var a=this,n=$.map(t.items,function(n){return $.each(n,function(t,e){n[t]=(e+"").replace(/(&amp;)|(&gt;)|(&lt;)|(&quot;)/g,function(t){return replaceMap[t]})}),n.ajax=1,n.el=a.$element,n});return e.page=e.page||1,t.per_page=t.per_page||30,{results:n,pagination:{more:e.page*t.per_page<t.total_count}}}function updateSelect2(t,e){var n=$("#"+t),a={},i="";n.length&&(n.empty(),$.each(e,function(t,e){a=$("<option></option>").val(e.id),i="",$.each(e,function(t,e){e=e.replace(/(&amp;)|(&gt;)|(&lt;)|(&quot;)/g,function(t){return replaceMap[t]}),i+=" "+e,a.data(t,e)}),a.text(i),n.append(a)}))}function updateSelected(t){$.each(t,function(t,e){let n=$("#"+e.id);var a;n.length&&(a=function(){n.val(e.value),e.trigger&&n.trigger(e.trigger)},e.timeout?setTimeout(a,e.timeout):a())})}function filtersMobile(){$("form.form-filters-mobile").each(function(){var t=$(this).data("summary"),e=$(this).find("input[type=text], input[type=email], input[type=number], input[type=tel], input[type=url], select"),n="";t&&t.length&&e.length&&(e.each(function(){var t,e;$(this).val().length&&(t=$("label[for="+$(this).attr("id")+"]").text(),e="SELECT"==$(this).prop("nodeName")?$(this).find("option:selected").text():$(this).val(),n+='<span class="font-weight-normal">'+t+"</span> ",n+=e,n+="<br />")}),n.length&&(n='<h5 class="mb-0">Filtre active</h5>'+n,$(t).html(n)))})}function scrollToTarget(t){let e=$(t),n=null,a=0,i=$(".notification-bar"),l=$("#datatable thead");if(l.length&&(a=l.outerHeight()),$(window).width()<=768&&(a+=$(".nav-menu").outerHeight(),i.length&&(a+=i.outerHeight())),e.length){let t=e.offset().top;a&&(t-=a),n=$("html").hasClass("perfect-scrollbar-on")?(t+=$(".main-panel").scrollTop(),$(".main-panel")):$("html, body"),n.animate({scrollTop:t},500)}}function redirectTimeout(t,e){setTimeout(function(){"reload"==t?location.reload():document.location.href=t},e)}function addCharLimit(){$("input.char-limit, textarea.char-limit").each(function(){var t=$(this).data("limit"),e=$($(this).data("limit-counter"));t&&e.length&&($(this).val().length>t&&(t=$(this).val().length),$(this).limiter(t,e))})}